{"version":3,"file":"CodeMirrorProxy-a4266d26.js","sources":["../../src/codemirror/extensions/useCodeMirrorTheme.ts","../../src/codemirror/defaultCodeModes.ts","../../src/codemirror/extensions/highlightLineExtension.ts","../../src/codemirror/extensions/useFontSize.ts","../../src/codemirror/extensions/theme.ts","../../src/codemirror/CodeMirrorProxy.tsx"],"sourcesContent":["import {rgba, useTheme} from '@sanity/ui'\nimport {useMemo} from 'react'\nimport {createTheme} from '@uiw/codemirror-themes'\nimport {tags as t} from '@lezer/highlight'\nimport {Extension} from '@codemirror/state'\n\nexport function useCodeMirrorTheme(): Extension {\n  const theme = useTheme()\n\n  return useMemo(() => {\n    const {code: codeFont} = theme.sanity.fonts\n    const {base, card, dark, syntax} = theme.sanity.color\n\n    return createTheme({\n      theme: dark ? 'dark' : 'light',\n      settings: {\n        background: card.enabled.bg,\n        foreground: card.enabled.code.fg,\n        lineHighlight: card.enabled.bg,\n        fontFamily: codeFont.family,\n        caret: base.focusRing,\n        selection: rgba(base.focusRing, 0.2),\n        selectionMatch: rgba(base.focusRing, 0.4),\n        gutterBackground: card.disabled.bg,\n        gutterForeground: card.disabled.code.fg,\n        gutterActiveForeground: card.enabled.fg,\n      },\n      styles: [\n        {\n          tag: [t.heading, t.heading2, t.heading3, t.heading4, t.heading5, t.heading6],\n          color: card.enabled.fg,\n        },\n        {tag: t.angleBracket, color: card.enabled.code.fg},\n        {tag: t.atom, color: syntax.keyword},\n        {tag: t.attributeName, color: syntax.attrName},\n        {tag: t.bool, color: syntax.boolean},\n        {tag: t.bracket, color: card.enabled.code.fg},\n        {tag: t.className, color: syntax.className},\n        {tag: t.comment, color: syntax.comment},\n        {tag: t.definition(t.typeName), color: syntax.function},\n        {\n          tag: [\n            t.definition(t.variableName),\n            t.function(t.variableName),\n            t.className,\n            t.attributeName,\n          ],\n          color: syntax.function,\n        },\n        {tag: [t.function(t.propertyName), t.propertyName], color: syntax.function},\n        {tag: t.keyword, color: syntax.keyword},\n        {tag: t.null, color: syntax.number},\n        {tag: t.number, color: syntax.number},\n        {tag: t.meta, color: card.enabled.code.fg},\n        {tag: t.operator, color: syntax.operator},\n        {tag: t.propertyName, color: syntax.property},\n        {tag: [t.string, t.special(t.brace)], color: syntax.string},\n        {tag: t.tagName, color: syntax.className},\n        {tag: t.typeName, color: syntax.keyword},\n      ],\n    })\n  }, [theme])\n}\n","import {StreamLanguage} from '@codemirror/language'\nimport {type Extension} from '@codemirror/state'\n\nexport interface CodeMode {\n  name: string\n  loader: ModeLoader\n}\nexport type ModeLoader = () => Promise<Extension | undefined> | Extension | undefined\n\nexport const defaultCodeModes: CodeMode[] = [\n  {\n    name: 'groq',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) => javascript({jsx: false})),\n  },\n  {\n    name: 'javascript',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) => javascript({jsx: false})),\n  },\n  {\n    name: 'jsx',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) => javascript({jsx: true})),\n  },\n  {\n    name: 'typescript',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) =>\n        javascript({jsx: false, typescript: true})\n      ),\n  },\n  {\n    name: 'tsx',\n    loader: () =>\n      import('@codemirror/lang-javascript').then(({javascript}) =>\n        javascript({jsx: true, typescript: true})\n      ),\n  },\n  {name: 'php', loader: () => import('@codemirror/lang-php').then(({php}) => php())},\n  {name: 'sql', loader: () => import('@codemirror/lang-sql').then(({sql}) => sql())},\n  {\n    name: 'mysql',\n    loader: () => import('@codemirror/lang-sql').then(({sql, MySQL}) => sql({dialect: MySQL})),\n  },\n  {name: 'json', loader: () => import('@codemirror/lang-json').then(({json}) => json())},\n  {\n    name: 'markdown',\n    loader: () => import('@codemirror/lang-markdown').then(({markdown}) => markdown()),\n  },\n  {name: 'java', loader: () => import('@codemirror/lang-java').then(({java}) => java())},\n  {name: 'html', loader: () => import('@codemirror/lang-html').then(({html}) => html())},\n  {\n    name: 'csharp',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/clike').then(({csharp}) =>\n        StreamLanguage.define(csharp)\n      ),\n  },\n  {\n    name: 'sh',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/shell').then(({shell}) => StreamLanguage.define(shell)),\n  },\n  {\n    name: 'css',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/css').then(({css}) => StreamLanguage.define(css)),\n  },\n  {\n    name: 'scss',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/css').then(({css}) => StreamLanguage.define(css)),\n  },\n  {\n    name: 'sass',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/sass').then(({sass}) => StreamLanguage.define(sass)),\n  },\n  {\n    name: 'ruby',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/ruby').then(({ruby}) => StreamLanguage.define(ruby)),\n  },\n  {\n    name: 'python',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/python').then(({python}) =>\n        StreamLanguage.define(python)\n      ),\n  },\n  {\n    name: 'xml',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/xml').then(({xml}) => StreamLanguage.define(xml)),\n  },\n  {\n    name: 'yaml',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/yaml').then(({yaml}) => StreamLanguage.define(yaml)),\n  },\n  {\n    name: 'golang',\n    loader: () =>\n      import('@codemirror/legacy-modes/mode/go').then(({go}) => StreamLanguage.define(go)),\n  },\n  {name: 'text', loader: () => undefined},\n  {name: 'batch', loader: () => undefined},\n]\n","/* eslint-disable no-param-reassign */\n\nimport {Extension, StateEffect, StateField} from '@codemirror/state'\nimport {Decoration, EditorView, lineNumbers} from '@codemirror/view'\nimport {ThemeContextValue, rgba} from '@sanity/ui'\n\nconst highlightLineClass = 'cm-highlight-line'\n\nexport const addLineHighlight = StateEffect.define<number>()\nexport const removeLineHighlight = StateEffect.define<number>()\n\nexport const lineHighlightField = StateField.define({\n  create() {\n    return Decoration.none\n  },\n  update(lines, tr) {\n    lines = lines.map(tr.changes)\n    for (const e of tr.effects) {\n      if (e.is(addLineHighlight)) {\n        lines = lines.update({add: [lineHighlightMark.range(e.value)]})\n      }\n      if (e.is(removeLineHighlight)) {\n        lines = lines.update({\n          filter: (from) => {\n            // removeLineHighlight value is lineStart for the highlight, so keep other effects\n            return from !== e.value\n          },\n        })\n      }\n    }\n    return lines\n  },\n  toJSON(value, state) {\n    const highlightLines: number[] = []\n    const iter = value.iter()\n    while (iter.value) {\n      const lineNumber = state.doc.lineAt(iter.from).number\n      if (!highlightLines.includes(lineNumber)) {\n        highlightLines.push(lineNumber)\n      }\n      iter.next()\n    }\n    return highlightLines\n  },\n  fromJSON(value: number[], state) {\n    const lines = state.doc.lines\n    const highlights = value\n      .filter((line) => line <= lines) // one-indexed\n      .map((line) => lineHighlightMark.range(state.doc.line(line).from))\n    highlights.sort((a, b) => a.from - b.from)\n    try {\n      return Decoration.none.update({\n        add: highlights,\n      })\n    } catch (e) {\n      console.error(e)\n      return Decoration.none\n    }\n  },\n  provide: (f) => EditorView.decorations.from(f),\n})\n\nconst lineHighlightMark = Decoration.line({\n  class: highlightLineClass,\n})\n\nexport const highlightState: {\n  [prop: string]: StateField<any>\n} = {\n  highlight: lineHighlightField,\n}\n\nexport interface HighlightLineConfig {\n  onHighlightChange?: (lines: number[]) => void\n  readOnly?: boolean\n  theme: ThemeContextValue\n}\n\nfunction createCodeMirrorTheme(options: {themeCtx: ThemeContextValue}) {\n  const {themeCtx} = options\n  const dark = {color: themeCtx.theme.color.dark[themeCtx.tone]}\n  const light = {color: themeCtx.theme.color.light[themeCtx.tone]}\n\n  return EditorView.baseTheme({\n    '.cm-lineNumbers': {\n      cursor: 'default',\n    },\n    '.cm-line.cm-line': {\n      position: 'relative',\n    },\n\n    // need set background with pseudoelement so it does not render over selection color\n    [`.${highlightLineClass}::before`]: {\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: -3,\n      content: \"''\",\n      boxSizing: 'border-box',\n    },\n    [`&dark .${highlightLineClass}::before`]: {\n      background: rgba(dark.color.muted.caution.pressed.bg, 0.5),\n    },\n    [`&light .${highlightLineClass}::before`]: {\n      background: rgba(light.color.muted.caution.pressed.bg, 0.75),\n    },\n  })\n}\n\nexport const highlightLine = (config: HighlightLineConfig): Extension => {\n  const highlightTheme = createCodeMirrorTheme({themeCtx: config.theme})\n\n  return [\n    lineHighlightField,\n    config.readOnly\n      ? []\n      : lineNumbers({\n          domEventHandlers: {\n            mousedown: (editorView, lineInfo) => {\n              // Determine if the line for the clicked gutter line number has highlighted state or not\n              const line = editorView.state.doc.lineAt(lineInfo.from)\n              let isHighlighted = false\n              editorView.state\n                .field(lineHighlightField)\n                .between(line.from, line.to, (from, to, value) => {\n                  if (value) {\n                    isHighlighted = true\n                    return false // stop iteration\n                  }\n                  return undefined\n                })\n\n              if (isHighlighted) {\n                editorView.dispatch({effects: removeLineHighlight.of(line.from)})\n              } else {\n                editorView.dispatch({effects: addLineHighlight.of(line.from)})\n              }\n              if (config?.onHighlightChange) {\n                config.onHighlightChange(editorView.state.toJSON(highlightState).highlight)\n              }\n              return true\n            },\n          },\n        }),\n    highlightTheme,\n  ]\n}\n\n/**\n * Adds and removes highlights to the provided view using highlightLines\n * @param view\n * @param highlightLines\n */\nexport function setHighlightedLines(view: EditorView, highlightLines: number[]): void {\n  const doc = view.state.doc\n  const lines = doc.lines\n  //1-based line numbers\n  const allLineNumbers = Array.from({length: lines}, (x, i) => i + 1)\n  view.dispatch({\n    effects: allLineNumbers.map((lineNumber) => {\n      const line = doc.line(lineNumber)\n      if (highlightLines?.includes(lineNumber)) {\n        return addLineHighlight.of(line.from)\n      }\n      return removeLineHighlight.of(line.from)\n    }),\n  })\n}\n","import {Extension} from '@codemirror/state'\nimport {EditorView} from '@codemirror/view'\nimport {rem, useTheme} from '@sanity/ui'\nimport {useMemo} from 'react'\n\nexport function useFontSizeExtension(props: {fontSize: number}): Extension {\n  const {fontSize: fontSizeProp} = props\n  const theme = useTheme()\n\n  return useMemo(() => {\n    const {code: codeFont} = theme.sanity.fonts\n    const {fontSize, lineHeight} = codeFont.sizes[fontSizeProp] || codeFont.sizes[2]\n\n    return EditorView.baseTheme({\n      '&': {\n        fontSize: rem(fontSize),\n      },\n\n      '& .cm-scroller': {\n        lineHeight: `${lineHeight / fontSize} !important`,\n      },\n    })\n  }, [fontSizeProp, theme])\n}\n","import {Extension} from '@codemirror/state'\nimport {EditorView} from '@codemirror/view'\nimport {rgba, useRootTheme} from '@sanity/ui'\nimport {useMemo} from 'react'\n\nexport function useThemeExtension(): Extension {\n  const themeCtx = useRootTheme()\n\n  return useMemo(() => {\n    const dark = {color: themeCtx.theme.color.dark[themeCtx.tone]}\n    const light = {color: themeCtx.theme.color.light[themeCtx.tone]}\n\n    return EditorView.baseTheme({\n      '&.cm-editor': {\n        height: '100%',\n      },\n      '&.cm-editor.cm-focused': {\n        outline: 'none',\n      },\n\n      // Matching brackets\n      '&.cm-editor.cm-focused .cm-matchingBracket': {\n        backgroundColor: 'transparent',\n      },\n      '&.cm-editor.cm-focused .cm-nonmatchingBracket': {\n        backgroundColor: 'transparent',\n      },\n      '&dark.cm-editor.cm-focused .cm-matchingBracket': {\n        outline: `1px solid ${dark.color.base.border}`,\n      },\n      '&dark.cm-editor.cm-focused .cm-nonmatchingBracket': {\n        outline: `1px solid ${dark.color.base.border}`,\n      },\n      '&light.cm-editor.cm-focused .cm-matchingBracket': {\n        outline: `1px solid ${light.color.base.border}`,\n      },\n      '&light.cm-editor.cm-focused .cm-nonmatchingBracket': {\n        outline: `1px solid ${light.color.base.border}`,\n      },\n\n      // Size and padding of gutter\n      '& .cm-lineNumbers .cm-gutterElement': {\n        minWidth: `32px !important`,\n        padding: `0 8px !important`,\n      },\n      '& .cm-gutter.cm-foldGutter': {\n        width: `0px !important`,\n      },\n\n      // Color of gutter\n      '&dark .cm-gutters': {\n        color: `${rgba(dark.color.card.enabled.code.fg, 0.5)} !important`,\n        borderRight: `1px solid ${rgba(dark.color.base.border, 0.5)}`,\n      },\n      '&light .cm-gutters': {\n        color: `${rgba(light.color.card.enabled.code.fg, 0.5)} !important`,\n        borderRight: `1px solid ${rgba(light.color.base.border, 0.5)}`,\n      },\n    })\n  }, [themeCtx])\n}\n","import {forwardRef, useCallback, useContext, useEffect, useMemo, useState} from 'react'\nimport CodeMirror, {ReactCodeMirrorProps, ReactCodeMirrorRef} from '@uiw/react-codemirror'\nimport {useCodeMirrorTheme} from './extensions/useCodeMirrorTheme'\nimport {Extension} from '@codemirror/state'\nimport {CodeInputConfigContext} from './CodeModeContext'\nimport {defaultCodeModes} from './defaultCodeModes'\nimport {\n  highlightLine,\n  highlightState,\n  setHighlightedLines,\n} from './extensions/highlightLineExtension'\nimport {EditorView} from '@codemirror/view'\nimport {useRootTheme} from '@sanity/ui'\nimport {useFontSizeExtension} from './extensions/useFontSize'\nimport {useThemeExtension} from './extensions/theme'\n\nexport interface CodeMirrorProps extends ReactCodeMirrorProps {\n  highlightLines?: number[]\n  languageMode?: string\n  onHighlightChange?: (lines: number[]) => void\n}\n\n/**\n * CodeMirrorProxy is a wrapper component around CodeMirror that we lazy load to reduce initial bundle size.\n *\n * It is also responsible for integrating any CodeMirror extensions.\n */\nconst CodeMirrorProxy = forwardRef<ReactCodeMirrorRef, CodeMirrorProps>(function CodeMirrorProxy(\n  props,\n  ref\n) {\n  const {\n    basicSetup: basicSetupProp,\n    highlightLines,\n    languageMode,\n    onHighlightChange,\n    readOnly,\n    value,\n    ...codeMirrorProps\n  } = props\n\n  const themeCtx = useRootTheme()\n  const codeMirrorTheme = useCodeMirrorTheme()\n  const [editorView, setEditorView] = useState<EditorView | undefined>(undefined)\n\n  // Resolve extensions\n  const themeExtension = useThemeExtension()\n  const fontSizeExtension = useFontSizeExtension({fontSize: 1})\n  const languageExtension = useLanguageExtension(languageMode)\n  const highlightLineExtension = useMemo(\n    () =>\n      highlightLine({\n        onHighlightChange,\n        readOnly,\n        theme: themeCtx,\n      }),\n    [onHighlightChange, readOnly, themeCtx]\n  )\n\n  const extensions = useMemo(() => {\n    const baseExtensions = [\n      themeExtension,\n      fontSizeExtension,\n      highlightLineExtension,\n      EditorView.lineWrapping,\n    ]\n    if (languageExtension) {\n      return [...baseExtensions, languageExtension]\n    }\n    return baseExtensions\n  }, [fontSizeExtension, highlightLineExtension, languageExtension, themeExtension])\n\n  useEffect(() => {\n    if (editorView) {\n      setHighlightedLines(editorView, highlightLines ?? [])\n    }\n  }, [editorView, highlightLines, value])\n\n  const initialState = useMemo(() => {\n    return {\n      json: {\n        doc: value ?? '',\n        selection: {\n          main: 0,\n          ranges: [{anchor: 0, head: 0}],\n        },\n        highlight: highlightLines ?? [],\n      },\n      fields: highlightState,\n    }\n    // only need to calculate this on initial render\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const handleCreateEditor = useCallback((view: EditorView) => {\n    setEditorView(view)\n  }, [])\n\n  const basicSetup = useMemo(\n    () =>\n      basicSetupProp ?? {\n        highlightActiveLine: false,\n      },\n    [basicSetupProp]\n  )\n\n  return (\n    <CodeMirror\n      {...codeMirrorProps}\n      value={value}\n      ref={ref}\n      extensions={extensions}\n      theme={codeMirrorTheme}\n      onCreateEditor={handleCreateEditor}\n      initialState={initialState}\n      basicSetup={basicSetup}\n    />\n  )\n})\n\nfunction useLanguageExtension(mode?: string) {\n  const codeConfig = useContext(CodeInputConfigContext)\n\n  const [languageExtension, setLanguageExtension] = useState<Extension | undefined>()\n\n  useEffect(() => {\n    const customModes = codeConfig?.codeModes ?? []\n    const modes = [...customModes, ...defaultCodeModes]\n\n    const codeMode = modes.find((m) => m.name === mode)\n    if (!codeMode?.loader) {\n      console.warn(\n        `Found no codeMode for language mode ${mode}, syntax highlighting will be disabled.`\n      )\n    }\n    let active = true\n    Promise.resolve(codeMode?.loader())\n      .then((extension) => {\n        if (active) {\n          setLanguageExtension(extension)\n        }\n      })\n      .catch((e) => {\n        console.error(`Failed to load language mode ${mode}`, e)\n        if (active) {\n          setLanguageExtension(undefined)\n        }\n      })\n    return () => {\n      active = false\n    }\n  }, [mode, codeConfig])\n\n  return languageExtension\n}\n\nexport default CodeMirrorProxy\n"],"names":["useCodeMirrorTheme","theme","useTheme","useMemo","code","codeFont","sanity","fonts","base","card","dark","syntax","color","createTheme","settings","background","enabled","bg","foreground","fg","lineHighlight","fontFamily","family","caret","focusRing","selection","rgba","selectionMatch","gutterBackground","disabled","gutterForeground","gutterActiveForeground","styles","tag","t","heading","heading2","heading3","heading4","heading5","heading6","angleBracket","atom","keyword","attributeName","attrName","bool","boolean","bracket","className","comment","definition","typeName","function","variableName","propertyName","null","number","meta","operator","property","string","special","brace","tagName","defaultCodeModes","name","loader","then","javascript","jsx","typescript","php","sql","MySQL","dialect","json","markdown","java","html","csharp","StreamLanguage","define","shell","css","sass","ruby","python","xml","yaml","go","highlightLineClass","addLineHighlight","StateEffect","removeLineHighlight","lineHighlightField","StateField","create","Decoration","none","update","lines","tr","map","changes","e","effects","is","add","lineHighlightMark","range","value","filter","from","toJSON","state","highlightLines","iter","lineNumber","doc","lineAt","includes","push","next","fromJSON","highlights","line","sort","a","b","console","error","provide","f","EditorView","decorations","class","highlightState","highlight","createCodeMirrorTheme","options","themeCtx","tone","light","baseTheme","cursor","position","top","bottom","left","right","zIndex","content","boxSizing","muted","caution","pressed","highlightLine","config","highlightTheme","readOnly","lineNumbers","domEventHandlers","mousedown","editorView","lineInfo","isHighlighted","field","between","to","dispatch","of","onHighlightChange","setHighlightedLines","view","allLineNumbers","Array","length","x","i","useFontSizeExtension","props","fontSize","fontSizeProp","lineHeight","sizes","rem","useThemeExtension","useRootTheme","height","outline","backgroundColor","border","minWidth","padding","width","borderRight","CodeMirrorProxy","forwardRef","ref","basicSetup","basicSetupProp","languageMode","codeMirrorProps","codeMirrorTheme","setEditorView","useState","themeExtension","fontSizeExtension","languageExtension","useLanguageExtension","highlightLineExtension","extensions","baseExtensions","lineWrapping","useEffect","initialState","main","ranges","anchor","head","fields","handleCreateEditor","useCallback","highlightActiveLine","CodeMirror","onCreateEditor","mode","codeConfig","useContext","CodeInputConfigContext","setLanguageExtension","_a","customModes","codeModes","modes","codeMode","find","m","warn","active","Promise","resolve","extension","catch"],"mappings":";;;;;;;;;;AAMO,SAASA,kBAAgC,GAAA;EAC9C,MAAMC,QAAQC,QAAS,EAAA;EAEvB,OAAOC,QAAQ,MAAM;IACnB,MAAM;MAACC,IAAA,EAAMC;IAAQ,CAAA,GAAIJ,MAAMK,MAAO,CAAAC,KAAA;IACtC,MAAM;MAACC,IAAM;MAAAC,IAAA;MAAMC;MAAMC;IAAM,CAAA,GAAIV,MAAMK,MAAO,CAAAM,KAAA;IAEhD,OAAOC,WAAY,CAAA;MACjBZ,KAAA,EAAOS,OAAO,MAAS,GAAA,OAAA;MACvBI,QAAU,EAAA;QACRC,UAAA,EAAYN,KAAKO,OAAQ,CAAAC,EAAA;QACzBC,UAAA,EAAYT,IAAK,CAAAO,OAAA,CAAQZ,IAAK,CAAAe,EAAA;QAC9BC,aAAA,EAAeX,KAAKO,OAAQ,CAAAC,EAAA;QAC5BI,YAAYhB,QAAS,CAAAiB,MAAA;QACrBC,OAAOf,IAAK,CAAAgB,SAAA;QACZC,SAAW,EAAAC,IAAA,CAAKlB,IAAK,CAAAgB,SAAA,EAAW,GAAG,CAAA;QACnCG,cAAgB,EAAAD,IAAA,CAAKlB,IAAK,CAAAgB,SAAA,EAAW,GAAG,CAAA;QACxCI,gBAAA,EAAkBnB,KAAKoB,QAAS,CAAAZ,EAAA;QAChCa,gBAAA,EAAkBrB,IAAK,CAAAoB,QAAA,CAASzB,IAAK,CAAAe,EAAA;QACrCY,sBAAA,EAAwBtB,KAAKO,OAAQ,CAAAG;MACvC,CAAA;MACAa,MAAQ,EAAA,CACN;QACEC,GAAK,EAAA,CAACC,IAAE,CAAAC,OAAA,EAASD,IAAE,CAAAE,QAAA,EAAUF,IAAE,CAAAG,QAAA,EAAUH,IAAE,CAAAI,QAAA,EAAUJ,IAAE,CAAAK,QAAA,EAAUL,KAAEM,QAAQ,CAAA;QAC3E5B,KAAA,EAAOH,KAAKO,OAAQ,CAAAG;MACtB,CAAA,EACA;QAACc,KAAKC,IAAE,CAAAO,YAAA;QAAc7B,OAAOH,IAAK,CAAAO,OAAA,CAAQZ,KAAKe;MAAE,CAAA,EACjD;QAACc,GAAK,EAAAC,IAAA,CAAEQ,IAAM;QAAA9B,KAAA,EAAOD,OAAOgC;MAAO,CAAA,EACnC;QAACV,GAAK,EAAAC,IAAA,CAAEU,aAAe;QAAAhC,KAAA,EAAOD,OAAOkC;MAAQ,CAAA,EAC7C;QAACZ,GAAK,EAAAC,IAAA,CAAEY,IAAM;QAAAlC,KAAA,EAAOD,OAAOoC;MAAO,CAAA,EACnC;QAACd,KAAKC,IAAE,CAAAc,OAAA;QAASpC,OAAOH,IAAK,CAAAO,OAAA,CAAQZ,KAAKe;MAAE,CAAA,EAC5C;QAACc,GAAK,EAAAC,IAAA,CAAEe,SAAW;QAAArC,KAAA,EAAOD,OAAOsC;MAAS,CAAA,EAC1C;QAAChB,GAAK,EAAAC,IAAA,CAAEgB,OAAS;QAAAtC,KAAA,EAAOD,OAAOuC;MAAO,CAAA,EACtC;QAACjB,KAAKC,IAAE,CAAAiB,UAAA,CAAWjB,KAAEkB,QAAQ,CAAA;QAAGxC,KAAO,EAAAD,MAAA,CAAO0C;MAAQ,CAAA,EACtD;QACEpB,GAAK,EAAA,CACHC,IAAA,CAAEiB,UAAW,CAAAjB,IAAA,CAAEoB,YAAY,CAAA,EAC3BpB,IAAA,CAAEmB,QAAS,CAAAnB,IAAA,CAAEoB,YAAY,CAAA,EACzBpB,IAAE,CAAAe,SAAA,EACFf,IAAE,CAAAU,aAAA,CACJ;QACAhC,OAAOD,MAAO,CAAA0C;MAChB,CAAA,EACA;QAACpB,GAAA,EAAK,CAACC,IAAA,CAAEmB,QAAS,CAAAnB,IAAA,CAAEqB,YAAY,CAAA,EAAGrB,IAAE,CAAAqB,YAAY,CAAG;QAAA3C,KAAA,EAAOD,OAAO0C;MAAQ,CAAA,EAC1E;QAACpB,GAAK,EAAAC,IAAA,CAAES,OAAS;QAAA/B,KAAA,EAAOD,OAAOgC;MAAO,CAAA,EACtC;QAACV,GAAK,EAAAC,IAAA,CAAEsB,IAAM;QAAA5C,KAAA,EAAOD,OAAO8C;MAAM,CAAA,EAClC;QAACxB,GAAK,EAAAC,IAAA,CAAEuB,MAAQ;QAAA7C,KAAA,EAAOD,OAAO8C;MAAM,CAAA,EACpC;QAACxB,KAAKC,IAAE,CAAAwB,IAAA;QAAM9C,OAAOH,IAAK,CAAAO,OAAA,CAAQZ,KAAKe;MAAE,CAAA,EACzC;QAACc,GAAK,EAAAC,IAAA,CAAEyB,QAAU;QAAA/C,KAAA,EAAOD,OAAOgD;MAAQ,CAAA,EACxC;QAAC1B,GAAK,EAAAC,IAAA,CAAEqB,YAAc;QAAA3C,KAAA,EAAOD,OAAOiD;MAAQ,CAAA,EAC5C;QAAC3B,GAAA,EAAK,CAACC,IAAA,CAAE2B,MAAQ,EAAA3B,IAAA,CAAE4B,OAAQ,CAAA5B,IAAA,CAAE6B,KAAK,CAAC,CAAG;QAAAnD,KAAA,EAAOD,OAAOkD;MAAM,CAAA,EAC1D;QAAC5B,GAAK,EAAAC,IAAA,CAAE8B,OAAS;QAAApD,KAAA,EAAOD,OAAOsC;MAAS,CAAA,EACxC;QAAChB,GAAK,EAAAC,IAAA,CAAEkB,QAAU;QAAAxC,KAAA,EAAOD,OAAOgC;MAAO,CAAA;IACzC,CACD,CAAA;EAAA,CACH,EAAG,CAAC1C,KAAK,CAAC,CAAA;AACZ;ACrDO,MAAMgE,gBAA+B,GAAA,CAC1C;EACEC,IAAM,EAAA,MAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,6BAA6B,EAAEC,IAAK,CAAA;IAAA,IAAC;MAACC;;WAAgBA,UAAW,CAAA;MAACC,GAAK,EAAA;IAAM,CAAA,CAAC;EAAA;AACzF,CAAA,EACA;EACEJ,IAAM,EAAA,YAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,6BAA6B,EAAEC,IAAK,CAAA;IAAA,IAAC;MAACC;;WAAgBA,UAAW,CAAA;MAACC,GAAK,EAAA;IAAM,CAAA,CAAC;EAAA;AACzF,CAAA,EACA;EACEJ,IAAM,EAAA,KAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,6BAA6B,EAAEC,IAAK,CAAA;IAAA,IAAC;MAACC;;WAAgBA,UAAW,CAAA;MAACC,GAAK,EAAA;IAAK,CAAA,CAAC;EAAA;AACxF,CAAA,EACA;EACEJ,IAAM,EAAA,YAAA;EACNC,MAAQ,EAAA,MACN,OAAO,6BAA6B,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACC;IAC3C,CAAA;IAAA,OAAAA,UAAA,CAAW;MAACC,GAAK,EAAA,KAAA;MAAOC,UAAY,EAAA;KAAK,CAAA;EAAA;AAE/C,CAAA,EACA;EACEL,IAAM,EAAA,KAAA;EACNC,MAAQ,EAAA,MACN,OAAO,6BAA6B,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACC;IAC3C,CAAA;IAAA,OAAAA,UAAA,CAAW;MAACC,GAAK,EAAA,IAAA;MAAMC,UAAY,EAAA;KAAK,CAAA;EAAA;AAE9C,CAAA,EACA;EAACL,IAAA,EAAM,KAAO;EAAAC,MAAA,EAAQ,MAAM,MAAA,CAAO,sBAAsB,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACI;KAAS;IAAA,OAAAA,GAAA,EAAK;EAAA;AAAC,CAAA,EACjF;EAACN,IAAA,EAAM,KAAO;EAAAC,MAAA,EAAQ,MAAM,MAAA,CAAO,sBAAsB,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACK;KAAS;IAAA,OAAAA,GAAA,EAAK;EAAA;AAAC,CAAA,EACjF;EACEP,IAAM,EAAA,OAAA;EACNC,QAAQ,MAAM,MAAO,CAAA,sBAAsB,CAAA,CAAEC,KAAK;IAAA,IAAC;MAACK,GAAK;MAAAC;IAAA;WAAWD,GAAI,CAAA;MAACE,OAAS,EAAAD;IAAM,CAAA,CAAC;EAAA;AAC3F,CAAA,EACA;EAACR,IAAA,EAAM,MAAQ;EAAAC,MAAA,EAAQ,MAAM,MAAA,CAAO,uBAAuB,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACQ;KAAU;IAAA,OAAAA,IAAA,EAAM;EAAA;AAAC,CAAA,EACrF;EACEV,IAAM,EAAA,UAAA;EACNC,MAAA,EAAQ,MAAM,MAAO,CAAA,2BAA2B,CAAA,CAAEC,IAAK,CAAA;IAAA,IAAC;MAACS;IAAA,CAAc;IAAA,OAAAA,QAAA,EAAU;EAAA;AACnF,CAAA,EACA;EAACX,IAAA,EAAM,MAAQ;EAAAC,MAAA,EAAQ,MAAM,MAAA,CAAO,uBAAuB,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACU;KAAU;IAAA,OAAAA,IAAA,EAAM;EAAA;AAAC,CAAA,EACrF;EAACZ,IAAA,EAAM,MAAQ;EAAAC,MAAA,EAAQ,MAAM,MAAA,CAAO,uBAAuB,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACW;KAAU;IAAA,OAAAA,IAAA,EAAM;EAAA;AAAC,CAAA,EACrF;EACEb,IAAM,EAAA,QAAA;EACNC,MAAQ,EAAA,MACN,OAAO,qCAAqC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACY;IACnD,CAAA;IAAA,OAAAC,cAAA,CAAeC,OAAOF,MAAM,CAAA;EAAA;AAElC,CAAA,EACA;EACEd,IAAM,EAAA,IAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,qCAAqC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACe;IAAK,CAAA;IAAA,OAAMF,cAAe,CAAAC,MAAA,CAAOC,KAAK,CAAC;EAAA;AAChG,CAAA,EACA;EACEjB,IAAM,EAAA,KAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,mCAAmC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACgB;IAAG,CAAA;IAAA,OAAMH,cAAe,CAAAC,MAAA,CAAOE,GAAG,CAAC;EAAA;AAC1F,CAAA,EACA;EACElB,IAAM,EAAA,MAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,mCAAmC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACgB;IAAG,CAAA;IAAA,OAAMH,cAAe,CAAAC,MAAA,CAAOE,GAAG,CAAC;EAAA;AAC1F,CAAA,EACA;EACElB,IAAM,EAAA,MAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,oCAAoC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACiB;IAAI,CAAA;IAAA,OAAMJ,cAAe,CAAAC,MAAA,CAAOG,IAAI,CAAC;EAAA;AAC7F,CAAA,EACA;EACEnB,IAAM,EAAA,MAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,oCAAoC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACkB;IAAI,CAAA;IAAA,OAAML,cAAe,CAAAC,MAAA,CAAOI,IAAI,CAAC;EAAA;AAC7F,CAAA,EACA;EACEpB,IAAM,EAAA,QAAA;EACNC,MAAQ,EAAA,MACN,OAAO,sCAAsC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACmB;IACpD,CAAA;IAAA,OAAAN,cAAA,CAAeC,OAAOK,MAAM,CAAA;EAAA;AAElC,CAAA,EACA;EACErB,IAAM,EAAA,KAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,mCAAmC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACoB;IAAG,CAAA;IAAA,OAAMP,cAAe,CAAAC,MAAA,CAAOM,GAAG,CAAC;EAAA;AAC1F,CAAA,EACA;EACEtB,IAAM,EAAA,MAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,oCAAoC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACqB;IAAI,CAAA;IAAA,OAAMR,cAAe,CAAAC,MAAA,CAAOO,IAAI,CAAC;EAAA;AAC7F,CAAA,EACA;EACEvB,IAAM,EAAA,QAAA;EACNC,MAAQ,EAAA,MACN,MAAA,CAAO,kCAAkC,CAAE,CAAAC,IAAA,CAAK;IAAA,IAAC;MAACsB;IAAE,CAAA;IAAA,OAAMT,cAAe,CAAAC,MAAA,CAAOQ,EAAE,CAAC;EAAA;AACvF,CAAA,EACA;EAACxB,IAAA,EAAM,MAAQ;EAAAC,MAAA,EAAQ,MAAM,KAAS;AAAA,CAAA,EACtC;EAACD,IAAA,EAAM,OAAS;EAAAC,MAAA,EAAQ,MAAM,KAAS;AAAA,CAAA,CACzC;ACtGA,MAAMwB,kBAAqB,GAAA,mBAAA;AAEd,MAAAC,gBAAA,GAAmBC,YAAYX,MAAe,EAAA;AAC9C,MAAAY,mBAAA,GAAsBD,YAAYX,MAAe,EAAA;AAEjD,MAAAa,kBAAA,GAAqBC,WAAWd,MAAO,CAAA;EAClDe,MAAS,GAAA;IACP,OAAOC,UAAW,CAAAC,IAAA;EACpB,CAAA;EACAC,MAAA,CAAOC,OAAOC,EAAI,EAAA;IACRD,KAAA,GAAAA,KAAA,CAAME,GAAI,CAAAD,EAAA,CAAGE,OAAO,CAAA;IACjB,KAAA,MAAAC,CAAA,IAAKH,GAAGI,OAAS,EAAA;MACtB,IAAAD,CAAA,CAAEE,EAAG,CAAAf,gBAAgB,CAAG,EAAA;QAClBS,KAAA,GAAAA,KAAA,CAAMD,MAAO,CAAA;UAACQ,GAAK,EAAA,CAACC,iBAAkB,CAAAC,KAAA,CAAML,CAAE,CAAAM,KAAK,CAAC;QAAE,CAAA,CAAA;MAChE;MACI,IAAAN,CAAA,CAAEE,EAAG,CAAAb,mBAAmB,CAAG,EAAA;QAC7BO,KAAA,GAAQA,MAAMD,MAAO,CAAA;UACnBY,MAAA,EAASC,IAAS,IAAA;YAEhB,OAAOA,SAASR,CAAE,CAAAM,KAAA;UACpB;QAAA,CACD,CAAA;MACH;IACF;IACO,OAAAV,KAAA;EACT,CAAA;EACAa,MAAA,CAAOH,OAAOI,KAAO,EAAA;IACnB,MAAMC,iBAA2B,EAAC;IAC5B,MAAAC,IAAA,GAAON,MAAMM,IAAK,EAAA;IACxB,OAAOA,KAAKN,KAAO,EAAA;MACjB,MAAMO,aAAaH,KAAM,CAAAI,GAAA,CAAIC,MAAO,CAAAH,IAAA,CAAKJ,IAAI,CAAE,CAAAxD,MAAA;MAC/C,IAAI,CAAC2D,cAAA,CAAeK,QAAS,CAAAH,UAAU,CAAG,EAAA;QACxCF,cAAA,CAAeM,KAAKJ,UAAU,CAAA;MAChC;MACAD,IAAA,CAAKM,IAAK,EAAA;IACZ;IACO,OAAAP,cAAA;EACT,CAAA;EACAQ,QAAA,CAASb,OAAiBI,KAAO,EAAA;IACzB,MAAAd,KAAA,GAAQc,MAAMI,GAAI,CAAAlB,KAAA;IACxB,MAAMwB,aAAad,KAChB,CAAAC,MAAA,CAAQc,IAAS,IAAAA,IAAA,IAAQzB,KAAK,CAC9B,CAAAE,GAAA,CAAKuB,IAAS,IAAAjB,iBAAA,CAAkBC,MAAMK,KAAM,CAAAI,GAAA,CAAIO,KAAKA,IAAI,CAAA,CAAEb,IAAI,CAAC,CAAA;IACnEY,UAAA,CAAWE,KAAK,CAACC,CAAA,EAAGC,MAAMD,CAAE,CAAAf,IAAA,GAAOgB,EAAEhB,IAAI,CAAA;IACrC,IAAA;MACK,OAAAf,UAAA,CAAWC,KAAKC,MAAO,CAAA;QAC5BQ,GAAK,EAAAiB;MAAA,CACN,CAAA;aACMpB,CAAP,EAAA;MACAyB,OAAA,CAAQC,MAAM1B,CAAC,CAAA;MACf,OAAOP,UAAW,CAAAC,IAAA;IACpB;EACF,CAAA;EACAiC,SAAUC,CAAA,IAAMC,UAAW,CAAAC,WAAA,CAAYtB,KAAKoB,CAAC;AAC/C,CAAC,CAAA;AAED,MAAMxB,iBAAA,GAAoBX,WAAW4B,IAAK,CAAA;EACxCU,KAAO,EAAA7C;AACT,CAAC,CAAA;AAEM,MAAM8C,cAET,GAAA;EACFC,SAAW,EAAA3C;AACb,CAAA;AAQA,SAAS4C,sBAAsBC,OAAwC,EAAA;EAC/D,MAAA;IAACC;EAAY,CAAA,GAAAD,OAAA;EACb,MAAAlI,IAAA,GAAO;IAACE,KAAO,EAAAiI,QAAA,CAAS5I,MAAMW,KAAM,CAAAF,IAAA,CAAKmI,QAAS,CAAAC,IAAI;GAAC;EACvD,MAAAC,KAAA,GAAQ;IAACnI,KAAO,EAAAiI,QAAA,CAAS5I,MAAMW,KAAM,CAAAmI,KAAA,CAAMF,QAAS,CAAAC,IAAI;GAAC;EAE/D,OAAOR,WAAWU,SAAU,CAAA;IAC1B,iBAAmB,EAAA;MACjBC,MAAQ,EAAA;IACV,CAAA;IACA,kBAAoB,EAAA;MAClBC,QAAU,EAAA;IACZ,CAAA;IAAA;IAGA,YAAKvD,kBAAA,gBAA+B;MAClCuD,QAAU,EAAA,UAAA;MACVC,GAAK,EAAA,CAAA;MACLC,MAAQ,EAAA,CAAA;MACRC,IAAM,EAAA,CAAA;MACNC,KAAO,EAAA,CAAA;MACPC,MAAQ,EAAA,CAAA,CAAA;MACRC,OAAS,EAAA,IAAA;MACTC,SAAW,EAAA;IACb,CAAA;IACA,kBAAW9D,kBAAA,gBAA+B;MACxC5E,UAAA,EAAYW,KAAKhB,IAAK,CAAAE,KAAA,CAAM8I,MAAMC,OAAQ,CAAAC,OAAA,CAAQ3I,IAAI,GAAG;IAC3D,CAAA;IACA,mBAAY0E,kBAAA,gBAA+B;MACzC5E,UAAA,EAAYW,KAAKqH,KAAM,CAAAnI,KAAA,CAAM8I,MAAMC,OAAQ,CAAAC,OAAA,CAAQ3I,IAAI,IAAI;IAC7D;EAAA,CACD,CAAA;AACH;AAEa,MAAA4I,aAAA,GAAiBC,MAA2C,IAAA;EACvE,MAAMC,iBAAiBpB,qBAAsB,CAAA;IAACE,QAAU,EAAAiB,MAAA,CAAO7J;GAAM,CAAA;EAE9D,OAAA,CACL8F,kBAAA,EACA+D,MAAO,CAAAE,QAAA,GACH,EAAC,GACDC,WAAY,CAAA;IACVC,gBAAkB,EAAA;MAChBC,SAAA,EAAW,CAACC,UAAA,EAAYC,QAAa,KAAA;QAEnC,MAAMvC,OAAOsC,UAAW,CAAAjD,KAAA,CAAMI,GAAI,CAAAC,MAAA,CAAO6C,SAASpD,IAAI,CAAA;QACtD,IAAIqD,aAAgB,GAAA,KAAA;QACpBF,UAAA,CAAWjD,KACR,CAAAoD,KAAA,CAAMxE,kBAAkB,CAAA,CACxByE,OAAQ,CAAA1C,IAAA,CAAKb,IAAM,EAAAa,IAAA,CAAK2C,EAAI,EAAA,CAACxD,IAAM,EAAAwD,EAAA,EAAI1D,KAAU,KAAA;UAChD,IAAIA,KAAO,EAAA;YACOuD,aAAA,GAAA,IAAA;YACT,OAAA,KAAA;UACT;UACO,OAAA,KAAA,CAAA;QAAA,CACR,CAAA;QAEH,IAAIA,aAAe,EAAA;UACNF,UAAA,CAAAM,QAAA,CAAS;YAAChE,OAAS,EAAAZ,mBAAA,CAAoB6E,GAAG7C,IAAK,CAAAb,IAAI;WAAE,CAAA;QAAA,CAC3D,MAAA;UACMmD,UAAA,CAAAM,QAAA,CAAS;YAAChE,OAAS,EAAAd,gBAAA,CAAiB+E,GAAG7C,IAAK,CAAAb,IAAI;WAAE,CAAA;QAC/D;QACA,IAAI6C,iCAAQc,iBAAmB,EAAA;UAC7Bd,MAAA,CAAOc,kBAAkBR,UAAW,CAAAjD,KAAA,CAAMD,MAAO,CAAAuB,cAAc,EAAEC,SAAS,CAAA;QAC5E;QACO,OAAA,IAAA;MACT;IACF;EAAA,CACD,CAAA,EACLqB,cAAA,CACF;AACF,CAAA;AAOgB,SAAAc,mBAAA,CAAoBC,MAAkB1D,cAAgC,EAAA;EAC9E,MAAAG,GAAA,GAAMuD,KAAK3D,KAAM,CAAAI,GAAA;EACvB,MAAMlB,QAAQkB,GAAI,CAAAlB,KAAA;EAEZ,MAAA0E,cAAA,GAAiBC,KAAM,CAAA/D,IAAA,CAAK;IAACgE,MAAA,EAAQ5E;GAAK,EAAG,CAAC6E,CAAA,EAAGC,CAAM,KAAAA,CAAA,GAAI,CAAC,CAAA;EAClEL,IAAA,CAAKJ,QAAS,CAAA;IACZhE,OAAS,EAAAqE,cAAA,CAAexE,GAAI,CAACe,UAAe,IAAA;MACpC,MAAAQ,IAAA,GAAOP,GAAI,CAAAO,IAAA,CAAKR,UAAU,CAAA;MAC5B,IAAAF,cAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAAA,cAAA,CAAgBK,SAASH,UAAa,CAAA,EAAA;QACjC,OAAA1B,gBAAA,CAAiB+E,EAAG,CAAA7C,IAAA,CAAKb,IAAI,CAAA;MACtC;MACO,OAAAnB,mBAAA,CAAoB6E,EAAG,CAAA7C,IAAA,CAAKb,IAAI,CAAA;IAAA,CACxC;EAAA,CACF,CAAA;AACH;ACpKO,SAASmE,qBAAqBC,KAAsC,EAAA;EACnE,MAAA;IAACC,QAAU,EAAAC;EAAgB,CAAA,GAAAF,KAAA;EACjC,MAAMpL,QAAQC,QAAS,EAAA;EAEvB,OAAOC,QAAQ,MAAM;IACnB,MAAM;MAACC,IAAA,EAAMC;IAAQ,CAAA,GAAIJ,MAAMK,MAAO,CAAAC,KAAA;IAChC,MAAA;MAAC+K,QAAU;MAAAE;IAAc,CAAA,GAAAnL,QAAA,CAASoL,MAAMF,YAAY,CAAA,IAAKlL,QAAS,CAAAoL,KAAA,CAAM,CAAC,CAAA;IAE/E,OAAOnD,WAAWU,SAAU,CAAA;MAC1B,GAAK,EAAA;QACHsC,QAAA,EAAUI,IAAIJ,QAAQ;MACxB,CAAA;MAEA,gBAAkB,EAAA;QAChBE,UAAA,YAAeA,UAAa,GAAAF,QAAA;MAC9B;IAAA,CACD,CAAA;EAAA,CACA,EAAA,CAACC,YAAc,EAAAtL,KAAK,CAAC,CAAA;AAC1B;AClBO,SAAS0L,iBAA+B,GAAA;EAC7C,MAAM9C,WAAW+C,YAAa,EAAA;EAE9B,OAAOzL,QAAQ,MAAM;IACb,MAAAO,IAAA,GAAO;MAACE,KAAO,EAAAiI,QAAA,CAAS5I,MAAMW,KAAM,CAAAF,IAAA,CAAKmI,QAAS,CAAAC,IAAI;KAAC;IACvD,MAAAC,KAAA,GAAQ;MAACnI,KAAO,EAAAiI,QAAA,CAAS5I,MAAMW,KAAM,CAAAmI,KAAA,CAAMF,QAAS,CAAAC,IAAI;KAAC;IAE/D,OAAOR,WAAWU,SAAU,CAAA;MAC1B,aAAe,EAAA;QACb6C,MAAQ,EAAA;MACV,CAAA;MACA,wBAA0B,EAAA;QACxBC,OAAS,EAAA;MACX,CAAA;MAAA;MAGA,4CAA8C,EAAA;QAC5CC,eAAiB,EAAA;MACnB,CAAA;MACA,+CAAiD,EAAA;QAC/CA,eAAiB,EAAA;MACnB,CAAA;MACA,gDAAkD,EAAA;QAChDD,OAAS,sBAAapL,IAAK,CAAAE,KAAA,CAAMJ,IAAK,CAAAwL,MAAA;MACxC,CAAA;MACA,mDAAqD,EAAA;QACnDF,OAAS,sBAAapL,IAAK,CAAAE,KAAA,CAAMJ,IAAK,CAAAwL,MAAA;MACxC,CAAA;MACA,iDAAmD,EAAA;QACjDF,OAAS,sBAAa/C,KAAM,CAAAnI,KAAA,CAAMJ,IAAK,CAAAwL,MAAA;MACzC,CAAA;MACA,oDAAsD,EAAA;QACpDF,OAAS,sBAAa/C,KAAM,CAAAnI,KAAA,CAAMJ,IAAK,CAAAwL,MAAA;MACzC,CAAA;MAAA;MAGA,qCAAuC,EAAA;QACrCC,QAAU,mBAAA;QACVC,OAAS;MACX,CAAA;MACA,4BAA8B,EAAA;QAC5BC,KAAO;MACT,CAAA;MAAA;MAGA,mBAAqB,EAAA;QACnBvL,KAAA,YAAUc,IAAK,CAAAhB,IAAA,CAAKE,MAAMH,IAAK,CAAAO,OAAA,CAAQZ,IAAK,CAAAe,EAAA,EAAI,GAAG,CAAA,gBAAA;QACnDiL,iCAA0B1K,IAAA,CAAKhB,KAAKE,KAAM,CAAAJ,IAAA,CAAKwL,QAAQ,GAAG,CAAA;MAC5D,CAAA;MACA,oBAAsB,EAAA;QACpBpL,KAAA,YAAUc,IAAK,CAAAqH,KAAA,CAAMnI,MAAMH,IAAK,CAAAO,OAAA,CAAQZ,IAAK,CAAAe,EAAA,EAAI,GAAG,CAAA,gBAAA;QACpDiL,iCAA0B1K,IAAA,CAAKqH,MAAMnI,KAAM,CAAAJ,IAAA,CAAKwL,QAAQ,GAAG,CAAA;MAC7D;IAAA,CACD,CAAA;EAAA,CACH,EAAG,CAACnD,QAAQ,CAAC,CAAA;AACf;ACjCA,MAAMwD,eAAkB,GAAAC,UAAA,CAAgD,SAASD,gBAAAA,CAC/EhB,OACAkB,GACA,EAAA;EACM,MAAA;IACJC,UAAY,EAAAC,cAAA;IACZrF,cAAA;IACAsF,YAAA;IACA9B,iBAAA;IACAZ,QAAA;IACAjD,KAAA;IACA,GAAG4F;EACD,CAAA,GAAAtB,KAAA;EAEJ,MAAMxC,WAAW+C,YAAa,EAAA;EAC9B,MAAMgB,kBAAkB5M,kBAAmB,EAAA;EAC3C,MAAM,CAACoK,UAAA,EAAYyC,aAAa,CAAA,GAAIC,SAAiC,KAAS,CAAA,CAAA;EAG9E,MAAMC,iBAAiBpB,iBAAkB,EAAA;EACzC,MAAMqB,iBAAoB,GAAA5B,oBAAA,CAAqB;IAACE,QAAA,EAAU;EAAE,CAAA,CAAA;EACtD,MAAA2B,iBAAA,GAAoBC,qBAAqBR,YAAY,CAAA;EAC3D,MAAMS,sBAAyB,GAAAhN,OAAA,CAC7B,MACE0J,aAAc,CAAA;IACZe,iBAAA;IACAZ,QAAA;IACA/J,KAAO,EAAA4I;EAAA,CACR,CAAA,EACH,CAAC+B,iBAAmB,EAAAZ,QAAA,EAAUnB,QAAQ,CAAA,CACxC;EAEM,MAAAuE,UAAA,GAAajN,QAAQ,MAAM;IAC/B,MAAMkN,cAAiB,GAAA,CACrBN,cAAA,EACAC,iBAAA,EACAG,sBAAA,EACA7E,UAAW,CAAAgF,YAAA,CACb;IACA,IAAIL,iBAAmB,EAAA;MACd,OAAA,CAAC,GAAGI,cAAA,EAAgBJ,iBAAiB,CAAA;IAC9C;IACO,OAAAI,cAAA;KACN,CAACL,iBAAA,EAAmBG,sBAAwB,EAAAF,iBAAA,EAAmBF,cAAc,CAAC,CAAA;EAEjFQ,SAAA,CAAU,MAAM;IACd,IAAInD,UAAY,EAAA;MACMS,mBAAA,CAAAT,UAAA,EAAYhD,cAAkB,IAAA,IAAA,GAAAA,cAAA,GAAA,EAAE,CAAA;IACtD;EACC,CAAA,EAAA,CAACgD,UAAY,EAAAhD,cAAA,EAAgBL,KAAK,CAAC,CAAA;EAEhC,MAAAyG,YAAA,GAAerN,QAAQ,MAAM;IAC1B,OAAA;MACLyE,IAAM,EAAA;QACJ2C,KAAKR,KAAS,IAAA,IAAA,GAAAA,KAAA,GAAA,EAAA;QACdtF,SAAW,EAAA;UACTgM,IAAM,EAAA,CAAA;UACNC,QAAQ,CAAC;YAACC,QAAQ,CAAG;YAAAC,IAAA,EAAM;WAAE;QAC/B,CAAA;QACAlF,SAAA,EAAWtB,0CAAkB;MAC/B,CAAA;MACAyG,MAAQ,EAAApF;IAAA,CACV;EAGF,CAAA,EAAG,EAAE,CAAA;EAEC,MAAAqF,kBAAA,GAAqBC,WAAY,CAACjD,IAAqB,IAAA;IAC3D+B,aAAA,CAAc/B,IAAI,CAAA;EACpB,CAAA,EAAG,EAAE,CAAA;EAEL,MAAM0B,UAAa,GAAArM,OAAA,CACjB,MACEsM,cAAkB,IAAA,IAAA,GAAAA,cAAA,GAAA;IAChBuB,mBAAqB,EAAA;EACvB,CAAA,EACF,CAACvB,cAAc,CAAA,CACjB;EAGE,sBAAAnI,GAAA,CAAC2J,UAAA,EAAA;IACE,GAAGtB,eAAA;IACJ5F,KAAA;IACAwF,GAAA;IACAa,UAAA;IACAnN,KAAO,EAAA2M,eAAA;IACPsB,cAAgB,EAAAJ,kBAAA;IAChBN,YAAA;IACAhB;EAAA,CAAA,CACF;AAEJ,CAAC,CAAA;AAED,SAASU,qBAAqBiB,IAAe,EAAA;EACrC,MAAAC,UAAA,GAAaC,WAAWC,sBAAsB,CAAA;EAEpD,MAAM,CAACrB,iBAAA,EAAmBsB,oBAAoB,CAAA,GAAIzB,QAAgC,EAAA;EAElFS,SAAA,CAAU,MAAM;IA7HlB,IAAAiB,EAAA;IA8HI,MAAMC,WAAc,GAAA,CAAAD,EAAA,GAAAJ,UAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAAA,UAAA,CAAYM,SAAZ,KAAA,IAAA,GAAAF,EAAA,GAAyB,EAAC;IAC9C,MAAMG,KAAQ,GAAA,CAAC,GAAGF,WAAA,EAAa,GAAGxK,gBAAgB,CAAA;IAElD,MAAM2K,WAAWD,KAAM,CAAAE,IAAA,CAAMC,CAAM,IAAAA,CAAA,CAAE5K,SAASiK,IAAI,CAAA;IAC9C,IAAA,EAACS,qCAAUzK,MAAQ,CAAA,EAAA;MACb+D,OAAA,CAAA6G,IAAA,+CACiCZ,IAAA,6CACzC;IACF;IACA,IAAIa,MAAS,GAAA,IAAA;IACbC,OAAA,CAAQC,QAAQN,QAAU,IAAA,IAAA,GAAA,KAAA,CAAA,GAAAA,QAAA,CAAAzK,MAAA,EAAQ,CAC/B,CAAAC,IAAA,CAAM+K,SAAc,IAAA;MACnB,IAAIH,MAAQ,EAAA;QACVT,oBAAA,CAAqBY,SAAS,CAAA;MAChC;IAAA,CACD,CAAA,CACAC,KAAM,CAAC3I,CAAM,IAAA;MACJyB,OAAA,CAAAC,KAAA,wCAAsCgG,IAAA,GAAQ1H,CAAC,CAAA;MACvD,IAAIuI,MAAQ,EAAA;QACVT,oBAAA,CAAqB,KAAS,CAAA,CAAA;MAChC;IAAA,CACD,CAAA;IACH,OAAO,MAAM;MACFS,MAAA,GAAA,KAAA;IAAA,CACX;EAAA,CACC,EAAA,CAACb,IAAM,EAAAC,UAAU,CAAC,CAAA;EAEd,OAAAnB,iBAAA;AACT;"}